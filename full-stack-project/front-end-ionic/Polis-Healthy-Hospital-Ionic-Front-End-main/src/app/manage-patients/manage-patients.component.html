<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Manage Patients</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <h2>Patients</h2>

        <div class="search-bar-container">
          <ion-searchbar
            class="custom-searchbar"
            [(ngModel)]="searchTerm"
            (ionInput)="filterPatients($event)"
          ></ion-searchbar>
          <ion-button (click)="createPatient()" class="create-button">Add new Patient</ion-button>
        </div>

        <table class="patient-table">
          <thead>
            <tr>
              <th>Patient ID</th>
              <th>Patient Name</th>
              <th>Patient BirthDate</th>
              <th>Patient Department</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let patient of filteredPatients">
              <td>{{ patient.id }}</td>
              <td>{{ patient.name }} {{ patient.lastName }}</td>
              <td>{{ patient.birthDate | date:'dd-MM-yyyy' }}</td>
              <td>{{ patient.department.name }}</td>
              <td>
                <div class="button-row">
                  <ion-button (click)="editPatient(patient)" color="primary" size="small">Edit</ion-button>
                  <ion-button (click)="confirmDelete(patient.id)" color="danger" size="small">Delete</ion-button>
                </div>
                <div class="button-row">
                  <ion-button (click)="dischargePatient(patient.id)" color="medium" size="small">Discharge</ion-button>
                  <ion-button (click)="manageAdmissions(patient.id)" color="primary" size="small">Manage Admissions</ion-button>
                </div>
                <div class="button-row">
                  <ion-button (click)="manageClinicalData(patient)" color="primary" size="small">Manage Clinical Data</ion-button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
